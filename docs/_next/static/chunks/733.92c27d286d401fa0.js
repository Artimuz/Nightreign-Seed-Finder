"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[733],{63:(e,t,r)=>{var n=r(7260);r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}})},4733:(e,t,r)=>{r.r(t),r.d(t,{default:()=>g});var n=r(5155),l=r(2115),o=r(63),i=r(5027),a=r.n(i),s=r(7017),c=r(2360);function u(e){let{isOpen:t,onClose:r,slotId:o,onSelect:i,availableOptions:a,currentBuilding:u}=e,[d,p]=(0,l.useState)(!1),m=60,h="p-1",g=64,y="p-1",f=80,b="p-1",w=4;if((0,l.useEffect)(()=>{p(!0)},[]),(0,l.useEffect)(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t]),!d||!t)return null;let x=Array.from(new Set(a));x.includes("empty")||x.unshift("empty");let v="nightlord"===o||x.some(e=>"empty"!==e&&Object.prototype.hasOwnProperty.call(c.y,e)),S=x.filter(e=>(!u||e!==u)&&(!!u&&""!==u&&"empty"!==u||"empty"!==e)).sort((e,t)=>{let r=v?c.Dx:c.ae,n=r.indexOf(e),l=r.indexOf(t);return -1!==n&&-1!==l?n-l:-1!==n?-1:+(-1!==l)});return(0,n.jsx)("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/20",onClick:e=>{e.target===e.currentTarget&&r()},children:(0,n.jsxs)("div",{className:"bg-black/95 rounded-2xl border border-gray-600/50 shadow-2xl ".concat((()=>{let e=S.length;return e<=2?"max-w-xs":e<=4?"max-w-sm":e<=8?"max-w-md":e<=12?"max-w-lg":"max-w-xl"})()," w-full max-h-[80vh] overflow-hidden mx-4"),onClick:e=>e.stopPropagation(),children:[(0,n.jsx)("div",{className:"p-6 border-b border-gray-700/50",children:(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("div",{children:(0,n.jsx)("h3",{className:"text-xl font-bold text-white",children:"Make your choice"})}),(0,n.jsx)("button",{onClick:r,className:"w-8 h-8 rounded-full bg-gray-700/50 hover:bg-gray-600/70 flex items-center justify-center transition-colors duration-75",children:(0,n.jsx)("span",{className:"text-white text-lg",children:"\xd7"})})]})}),(0,n.jsx)("div",{className:"p-6 overflow-y-auto max-h-96 scrollbar-custom",children:(0,n.jsx)("div",{className:"grid ".concat((()=>{let e=S.length;return v?"grid-cols-".concat(Math.min(e,w)):e<=2?"grid-cols-2":e<=3?"grid-cols-3":e<=4?"grid-cols-4":e<=5?"grid-cols-4 sm:grid-cols-5":"grid-cols-4 sm:grid-cols-5 md:grid-cols-6"})()," gap-2 justify-items-center"),children:S.map((e,t)=>{let l=e&&"empty"!==e?Object.prototype.hasOwnProperty.call(c.y,e)?(0,s.CX)("/Images/nightlordIcons/".concat(e,".webp")):(0,s.CX)("/Images/buildingIcons/".concat(e,".webp")):v?(0,s.CX)("/Images/nightlordIcons/empty_nightlord.webp"):(0,s.CX)("/Images/buildingIcons/empty.webp");return(0,n.jsxs)("button",{onClick:()=>{i(e),r()},className:"relative ".concat(h," ").concat(v?"md:".concat(b):"md:".concat(y)," rounded-xl border-2 border-gray-600/50 bg-gray-700/30 hover:border-yellow-400 hover:bg-gray-600/50 transition-all duration-75 group flex items-center justify-center"),children:[(0,n.jsx)("div",{className:"relative flex items-center justify-center md:hidden",style:{width:"".concat(m,"px"),height:"".concat(m,"px")},children:(0,n.jsx)("img",{src:l,alt:e||"empty",width:m,height:m,className:"object-contain group-hover:opacity-80 transition-opacity duration-100",loading:"lazy",decoding:"async"})}),(0,n.jsx)("div",{className:"relative items-center justify-center hidden md:flex",style:{width:"".concat(v?f:g,"px"),height:"".concat(v?f:g,"px")},children:(0,n.jsx)("img",{src:l,alt:e||"empty",width:v?f:g,height:v?f:g,className:"object-contain group-hover:opacity-80 transition-opacity duration-100",loading:"lazy",decoding:"async"})}),e&&e.endsWith("_spawn")&&(0,n.jsx)("div",{className:"absolute inset-x-0 -bottom-5 flex justify-center",children:(0,n.jsx)("span",{className:"px-2 py-0.5 rounded text-[10px] font-semibold bg-yellow-400 text-black shadow",children:"Spawn"})})]},"".concat(e,"-").concat(t))})})}),(0,n.jsx)("div",{className:"p-4 border-t border-gray-700/50 bg-black/30"})]})})}var d=r(9304);let p="seedfinder_rate_limit";var m=r(2220);let h={normal:(0,s.CX)("/Images/mapTypes/Normal.webp"),crater:(0,s.CX)("/Images/mapTypes/Crater.webp"),mountaintop:(0,s.CX)("/Images/mapTypes/Mountaintop.webp"),noklateo:(0,s.CX)("/Images/mapTypes/Noklateo, the Shrouded City.webp"),rotted:(0,s.CX)("/Images/mapTypes/Rotted Woods.webp"),greatHollow:(0,s.CX)("/Images/mapTypes/greatHollow.webp")};function g(e){let{mapType:t="normal"}=e,i=(0,l.useRef)(null),c=(0,l.useRef)(null),g=(0,l.useRef)(new Map),y=(0,l.useRef)(null),f=(0,l.useRef)(null),[b,w]=(0,l.useState)(!1),[x,v]=(0,l.useState)({}),[S,j]=(0,l.useState)(""),[O,C]=(0,l.useState)(!1),[E,I]=(0,l.useState)(""),[k,T]=(0,l.useState)(0),[N,z]=(0,l.useState)({}),[_,A]=(0,l.useState)(0),[M,P]=(0,l.useState)(null),L=(0,o.useRouter)(),{canMakeRequest:R,recordRequest:X,getRemainingTime:Z}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e4,[t,r]=(0,l.useState)(!1),n=()=>{try{let e=localStorage.getItem(p);if(e)return JSON.parse(e)}catch(e){}return{lastCallTime:0,isBlocked:!1}},o=e=>{try{localStorage.setItem(p,JSON.stringify(e))}catch(e){}};(0,l.useEffect)(()=>{let t=n();Date.now()-t.lastCallTime>=e?(o({lastCallTime:0,isBlocked:!1}),r(!1)):r(t.isBlocked)},[e]);let i=(0,l.useCallback)(()=>{let t=n();if(Date.now()-t.lastCallTime>=e)return o({lastCallTime:0,isBlocked:!1}),r(!1),!0;let l=t.isBlocked;return r(l),!l},[e]);return{canMakeRequest:i,recordRequest:(0,l.useCallback)(()=>{o({lastCallTime:Date.now(),isBlocked:!0}),r(!0)},[]),getRemainingTime:(0,l.useCallback)(()=>{let t=n();return t.isBlocked?Math.max(0,e-(Date.now()-t.lastCallTime)):0},[e]),isBlocked:t}}(3e4),{isPossibleSpawn:q,spawnAnalysis:B,selectedSpawnSlot:D,toggleSpawnSlot:H}=function(e){let{mapType:t,slots:r,nightlord:n}=e,[o,i]=(0,l.useState)({possibleSpawnSlots:[],confidence:0,matchingSeedCount:0}),[a,s]=(0,l.useState)(null),c=(0,l.useMemo)(()=>(0,m.o)(t,r,n),[t,r,n]);return(0,l.useEffect)(()=>{i(c),a&&!c.possibleSpawnSlots.includes(a)&&s(null)},[c,a]),{spawnAnalysis:o,selectedSpawnSlot:a,toggleSpawnSlot:e=>{s(t=>t===e?null:e)},isPossibleSpawn:e=>o.possibleSpawnSlots.includes(e),isSpawnSelected:e=>a===e}}({mapType:t,slots:x,nightlord:S&&"empty"!==S&&""!==S?S:null});(0,l.useEffect)(()=>{if(!i.current)return;let e=new MutationObserver(()=>{var e;let t=null==(e=i.current)?void 0:e.querySelectorAll('img[src*="empty.webp"]');t&&t.length>0&&t.forEach(e=>{if(e instanceof HTMLImageElement){let t=e.closest("[data-slot-id]");if(t){let r=t.getAttribute("data-slot-id");r&&"nightlord"!==r&&(null===D&&B.possibleSpawnSlots.includes(r)?e.style.filter="hue-rotate(115deg) saturate(1.5) brightness(1)":e.style.filter="")}}})});return e.observe(i.current,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["src"]}),()=>e.disconnect()},[B.possibleSpawnSlots,D]);let $=(e,t)=>{if("nightlord"===t)return;let r=x[t]||"",n=B.possibleSpawnSlots.includes(t),l=!D;(!r||""===r||"empty"===r)&&n&&l&&e.src.includes("empty.webp")?e.style.filter="hue-rotate(200deg) saturate(1.5) brightness(1.1)":e.style.filter=""},W=()=>{let e={};Object.keys(x).forEach(t=>{if(!Object.prototype.hasOwnProperty.call(x,t))return;let r=x[t];r&&"empty"!==r&&""!==r.trim()&&"string"==typeof t&&/^[a-zA-Z0-9_]+$/.test(t)&&(e[t]=r)});let r=S&&"empty"!==S?S:null;A((0,d.Z0)(t,e,r,D).length)};(0,l.useEffect)(()=>{let e=()=>{w(window.innerWidth<=768)},t=()=>{e(),c.current&&setTimeout(()=>{var e;null==(e=c.current)||e.invalidateSize({animate:!1})},50)};return e(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),(0,l.useEffect)(()=>{W()},[]),(0,l.useEffect)(()=>{W()},[x,S,t,D]),(0,l.useEffect)(()=>{M&&((async()=>{if(L.push("/result/".concat(M)),R())try{X();let e=(0,d.qW)().find(e=>e.seed_id===M),r=e?F(e.nightlord||""):"",n={seed_id:M,timezone:J(),path_taken:N,additional_info:t,session_duration:G(),Nightlord:r};fetch("/api/log",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).catch(()=>{})}catch(e){}})(),P(null))},[N,x,S,M,R,Z,X,L,t,D]),(0,l.useEffect)(()=>{let e="seedfinder_session_start";localStorage.getItem(e)||localStorage.setItem(e,Date.now().toString())},[]);let G=()=>{let e="seedfinder_session_start",t=localStorage.getItem(e);if(t){let r=Math.floor((Date.now()-parseInt(t))/1e3);return localStorage.removeItem(e),Math.min(r,86400)}return 0},F=e=>{let t=e.split("_");return t.length>1?t[1]:""},J=()=>{try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch(e){return"UTC"}},U=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return K(e,{...x},S&&""!==S&&"empty"!==S?S:null,t)},K=function(e,r,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];let l={};if(Object.keys(r).forEach(e=>{if(!Object.prototype.hasOwnProperty.call(r,e))return;let t=r[e];t&&"empty"!==t&&""!==t.trim()&&"string"==typeof e&&/^[a-zA-Z0-9_]+$/.test(e)&&(l[e]=t)}),"nightlord"===e){let e=(0,d.sN)(t,l,D);return n&&""!==n&&"empty"!==n&&e.push("empty"),e}let o={...l};return Object.prototype.hasOwnProperty.call(o,e)&&delete o[e],(0,d.qX)(t,o,n&&""!==n&&"empty"!==n?n:null,e,D)},Q=(e,r,n)=>{let l={};if(Object.keys(r).forEach(e=>{if(!Object.prototype.hasOwnProperty.call(r,e))return;let t=r[e];t&&"empty"!==t&&""!==t.trim()&&"string"==typeof e&&/^[a-zA-Z0-9_]+$/.test(e)&&(l[e]=t)}),"nightlord"===e){let e=(0,d.Sz)(t,l);return n&&""!==n&&"empty"!==n&&e.push("empty"),e}let o={...l};return Object.prototype.hasOwnProperty.call(o,e)&&delete o[e],(0,d.qX)(t,o,n&&"empty"!==n?n:null,e,D)},V=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e&&"empty"!==e&&""!==e?e.match(/^\d+_/)?(0,s.CX)("/Images/nightlordIcons/".concat(e,".webp")):(0,s.CX)("/Images/buildingIcons/".concat(e,".webp")):t?(0,s.CX)("/Images/nightlordIcons/empty_nightlord.webp"):(0,s.CX)("/Images/buildingIcons/empty.webp")},Y=(e,t)=>{let r=Math.max(1,1+.5*t);return[Math.round(e[0]*r),Math.round(e[1]*r)]},ee=(0,l.useRef)(x),et=(0,l.useRef)(S),er=(0,l.useRef)(D);(0,l.useEffect)(()=>{ee.current=x},[x]),(0,l.useEffect)(()=>{et.current=S},[S]),(0,l.useEffect)(()=>{er.current=D},[D]);let en=(e,r)=>{let n=r||E;"nightlord"===n?j(e):v(t=>({...t,[n]:e})),z(t=>{let r={...t};return"nightlord"===n?"empty"===e||""===e?delete r.nightlord:r.nightlord=e:"empty"===e||""===e?Object.prototype.hasOwnProperty.call(r,n)&&delete r[n]:"string"==typeof n&&/^[a-zA-Z0-9_]+$/.test(n)&&(r[n]=e),r}),setTimeout(()=>{let r={...ee.current},l=et.current||null;if("nightlord"===n){let n=""===e||"empty"===e?null:e,l={};Object.keys(r).forEach(e=>{if(!Object.prototype.hasOwnProperty.call(r,e))return;let t=r[e];t&&"empty"!==t&&""!==t.trim()&&"string"==typeof e&&/^[a-zA-Z0-9_]+$/.test(e)&&(l[e]=t)});let o=er.current,i=(0,d.Z0)(t,l,n,o);1===i.length&&P(i[0].seed_id)}else{let o={};Object.keys(r).forEach(e=>{if(!Object.prototype.hasOwnProperty.call(r,e))return;let t=r[e];t&&"empty"!==t&&""!==t.trim()&&"string"==typeof e&&/^[a-zA-Z0-9_]+$/.test(e)&&(o[e]=t)}),e&&"empty"!==e&&""!==e.trim()&&"string"==typeof n&&/^[a-zA-Z0-9_]+$/.test(n)&&(o[n]=e);let i=er.current,a=(0,d.Z0)(t,o,l&&"empty"!==l?l:null,i);1===a.length&&P(a[0].seed_id)}},0),C(!1)};return(0,l.useEffect)(()=>{if(!i.current)return;let e=i.current?Math.min(i.current.offsetWidth,i.current.offsetHeight):1e3,n=[[0,0],[e,e]];c.current&&c.current.remove();let l=a().map(i.current,{crs:a().CRS.Simple,...b?{minZoom:0,maxZoom:3}:{minZoom:0,maxZoom:2},zoomControl:!1,attributionControl:!1,zoomSnap:.1,zoomDelta:.1});return a().imageOverlay(h[t],n).addTo(l),l.fitBounds(n),T(l.getZoom()),c.current=l,setTimeout(async()=>{try{var n;if(!c.current||!c.current.getContainer())return;let{getInteractiveCoordinates:l}=await r.e(871).then(r.bind(r,3871)),o=l(t),s=(null==(n=i.current)?void 0:n.offsetWidth)||1e3,u=Math.max(24,.04*s),p={mobile:{size:[u,u],anchor:[u/2,u/2],popupAnchor:[0,-u/2]},desktop:{size:[1.3*u,1.3*u],anchor:[.65*u,.65*u],popupAnchor:[0,-(.65*u)]}},m=b?p.mobile:p.desktop;g.current.forEach(e=>{e.remove()}),g.current.clear(),document.querySelectorAll("[data-slot-id]").forEach(e=>{e.remove()}),document.querySelectorAll('[data-slot-id="nightlord"]').forEach(e=>{e.remove()}),o.forEach(r=>{let n=U(r.id,!1).filter(e=>"empty"!==e);if(0===n.length||g.current.has(r.id))return;let l=e/1e3,o=r.x*l,i=r.y*l,s=[e-i,o],u,p,h,y,f=!1,b=Q(r.id,x,S).filter(e=>"empty"!==e);if("nightlord"===r.id){let e=S||"";1!==b.length||e&&""!==e&&"empty"!==e?u=V(e,!0):(u=V(b[0],!0),f=!0);let t=Y(m.size,k);h=[(p=[1.75*t[0],1.75*t[1]])[0]/2,p[1]/2],y=[0,-p[1]/2]}else{let e=x[r.id]||"";1!==b.length||e&&""!==e&&"empty"!==e?u=V(e||"empty"):(u=V(b[0]),f=!0),h=[(p=Y(m.size,k))[0]/2,p[1]/2],y=[0,-p[1]/2]}let w=a().icon({iconUrl:u,iconSize:p,iconAnchor:h,popupAnchor:y}),v=a().marker(s,{icon:w,interactive:!0});v.on("add",()=>{let e=v.getElement();if(e&&(e.setAttribute("data-slot-id",r.id),e.setAttribute("data-building","nightlord"===r.id?S||"":"empty"),f)){let t="IMG"===e.tagName?e:e.querySelector("img");t&&t.classList.add("ghost-icon")}}),v.on("click",()=>{(e=>{let r=ee.current,n=et.current,l=((e,r,n,l)=>{let o={};if(Object.keys(r).forEach(e=>{if(!Object.prototype.hasOwnProperty.call(r,e))return;let t=r[e];t&&"empty"!==t&&""!==t.trim()&&"string"==typeof e&&/^[a-zA-Z0-9_]+$/.test(e)&&(o[e]=t)}),"nightlord"===e){let e=(0,d.sN)(t,o,l);return n&&""!==n&&"empty"!==n&&e.push("empty"),e}let i={...o};return Object.prototype.hasOwnProperty.call(i,e)&&delete i[e],(0,d.qX)(t,i,n&&""!==n&&"empty"!==n?n:null,e,l)})(e,r,n,er.current),o="nightlord"===e?n:Object.prototype.hasOwnProperty.call(r,e)?r[e]:void 0,i=l.filter(e=>"empty"!==e),a=er.current===e;if(1===i.length&&!a){let t=i[0];return o&&""!==o&&"empty"!==o&&o===t?en("empty",e):en(t,e)}if(o&&""!==o&&"empty"!==o&&!l.includes(o)||1===l.length&&"empty"===l[0]&&o&&""!==o&&"empty"!==o)return en("empty",e);l.length>0&&(I(e),C(!0))})(r.id)}),v.addTo(c.current),g.current.set(r.id,v)}),y.current=m}catch(e){}},250),l.setMaxBounds(n),l.on("zoom",()=>{l.panInsideBounds(n,{animate:!1}),T(l.getZoom())}),l.on("drag",()=>{l.panInsideBounds(n,{animate:!1})}),()=>{c.current&&(c.current.remove(),c.current=null)}},[t,L]),(0,l.useEffect)(()=>{if(!g.current||!y.current||!c.current)return;let e=g.current;Object.keys(x).forEach(t=>{if(!Object.prototype.hasOwnProperty.call(x,t))return;let r=e.get(t);if(r){let e=x[t],n=r.getElement();if(n){let l="IMG"===n.tagName?n:n.querySelector("img");l instanceof HTMLImageElement&&(l.src=V(e),n.setAttribute("data-building",e),$(l,t),r.setTooltipContent("Slot ".concat(t," - ").concat("empty"===e?"Empty":e)))}}});let t=e.get("nightlord");if(t){let e=S||"",r=t.getElement();if(r){let n="IMG"===r.tagName?r:r.querySelector("img");n&&n instanceof HTMLImageElement&&(n.src=V(e,!0),r.setAttribute("data-building",e),t.setTooltipContent("Nightlord - ".concat(e)))}}e.forEach((e,t)=>{if("nightlord"!==t&&!Object.prototype.hasOwnProperty.call(x,t)){let r=e.getElement();if(r&&"empty"!==r.getAttribute("data-building")){let n="IMG"===r.tagName?r:r.querySelector("img");n&&n instanceof HTMLImageElement&&(n.src=V("empty"),r.setAttribute("data-building","empty"),$(n,t),e.setTooltipContent("Slot ".concat(t," - Click to build")))}}})},[x,S]),(0,l.useEffect)(()=>{g.current&&c.current&&g.current.forEach((e,t)=>{U(t,!1);let r=Q(t,x,S).filter(e=>"empty"!==e),n=e.getElement();if(n){let i="nightlord"===t?S:Object.prototype.hasOwnProperty.call(x,t)&&x[t]||"",a=!i||""===i||"empty"===i;if(0===r.length)n.style.display="none",e.closeTooltip();else if(1===_&&a)n.style.setProperty("opacity","0","important"),e.closeTooltip();else{n.style.display="block",n.style.setProperty("opacity","1","important");let i="IMG"===n.tagName?n:n.querySelector("img");if(i){var l,o;if(i.classList.remove("ghost-icon"),1===r.length&&a)(null==(l=c.current)?void 0:l.hasLayer(e))||e.addTo(c.current),i instanceof HTMLImageElement&&(i.src=V(r[0],"nightlord"===t),i.classList.add("ghost-icon")),e.setTooltipContent("nightlord"===t?"Nightlord - Auto-select ".concat(r[0]):"Slot ".concat(t," - Auto-select ").concat(r[0]));else{let r="nightlord"===t?S||"":Object.prototype.hasOwnProperty.call(x,t)&&x[t]||"empty";(null==(o=c.current)?void 0:o.hasLayer(e))||e.addTo(c.current),i instanceof HTMLImageElement&&(i.src=V(r,"nightlord"===t),i.classList.remove("ghost-icon"),"nightlord"!==t&&$(i,t)),e.setTooltipContent("nightlord"===t?"Nightlord - Click to select":"Slot ".concat(t," - Click to build"))}}}}})},[x,S,t,_,D]),(0,l.useEffect)(()=>{if(!g.current||!c.current)return;let e=g.current;if(D){let t=e.get(D);if(t&&c.current){let e=t.getLatLng();if(f.current)f.current.setLatLng(e),f.current.setTooltipContent("Spawn Location - Slot ".concat(D));else{let t=a().icon({iconUrl:(0,s.CX)("/Images/SpawnIcons/spawn.webp"),iconSize:[70,70],iconAnchor:[35,35],popupAnchor:[0,-35]});f.current=a().marker(e,{icon:t,zIndexOffset:1e3,interactive:!1}).addTo(c.current),f.current.setTooltipContent("Spawn Location - Slot ".concat(D))}}}else f.current&&c.current&&(c.current.removeLayer(f.current),f.current=null)},[D]),(0,l.useEffect)(()=>{var e;if(!g.current||!y.current||!c.current)return;let t=Math.max(24,.04*((null==(e=i.current)?void 0:e.offsetWidth)||1e3)),r=b?{size:[t,t],anchor:[t/2,t/2],popupAnchor:[0,-t/2]}:{size:[1.3*t,1.3*t],anchor:[.65*t,.65*t],popupAnchor:[0,-(.65*t)]};y.current=r,g.current.forEach((e,t)=>{let n=e.getElement();if(n){let e="IMG"===n.tagName?n:n.querySelector("img");if(e){let l=Y(r.size,k),o="nightlord"===t?[1.75*l[0],1.75*l[1]]:l;e.style.width="".concat(o[0],"px"),e.style.height="".concat(o[1],"px");let i=[o[0]/2,o[1]/2];n.style.marginLeft="-".concat(i[0],"px"),n.style.marginTop="-".concat(i[1],"px")}}})},[k,b]),(0,l.useEffect)(()=>{if(!i.current)return;let e=new ResizeObserver(()=>{c.current&&setTimeout(()=>{var e;null==(e=c.current)||e.invalidateSize()},100)});return e.observe(i.current),()=>{e.disconnect()}},[]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("div",{ref:i,className:"overflow-hidden",style:{height:"calc(100vh - 160px)",width:"min(100vw, calc(100vh - 160px))",aspectRatio:"1",touchAction:"none",background:"transparent"}}),(0,n.jsxs)("div",{className:"absolute top-8 right-2 bg-black bg-opacity-70 text-white px-2 py-1 rounded text-sm font-medium pointer-events-none z-[1000]",style:{fontSize:b?"12px":"14px"},children:[_," seeds remaining"]})]}),(0,n.jsx)(u,{isOpen:O,onClose:()=>C(!1),slotId:E,onSelect:en,availableOptions:U(E),currentBuilding:"nightlord"===E?S:Object.prototype.hasOwnProperty.call(x,E)?x[E]:void 0})]})}}}]);